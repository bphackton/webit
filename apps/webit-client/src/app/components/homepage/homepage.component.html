<ng-template [ngIf]="qrReaderActive" [ngIfElse]="mainPage">
  <zxing-scanner
          (camerasNotFound)="camerasNotFound($event)"
          (scanSuccess)="scanSuccess($event)"
          (scanFailure)="scanFailure($event)"
          (scanError)="scanError($event)"
          (scanComplete)="scanComplete($event)"
  ></zxing-scanner>
</ng-template>

<ng-template #mainPage>
  <div class="main-page" [ngClass]="{'mobile': userAgent === 'mobile'}">
    <div class="view mobile-view" *ngIf="userAgent === 'mobile' || authenticated"
         [ngClass]="{'mobile-view': userAgent === 'mobile', 'web-view': userAgent === 'desktop'}">
      <div class="title">
        <span class="user-avatar"></span>
        <div class="user-name">
          <span>בוקר אור</span>
          <h2>ציפי שביט</h2>
        </div>
      </div>
      <div class="nav-bar">
        <div *ngIf="userAgent === 'desktop'">
          <button class="nav-btn setting"></button>
          <span>הגדרות</span>
        </div>
        <div>
          <button class="nav-btn give"></button>
          <span>שלח</span>
        </div>
        <div>
          <button class="nav-btn group"></button>
          <span>קבוצה</span>
        </div>
        <div>
          <button class="nav-btn ask"></button>
          <span>בקש</span>
        </div>
        <div *ngIf="userAgent === 'mobile'">
          <button class="nav-btn webit" (click)="qrReaderActive = true"></button>
          <span>Webit</span>
        </div>
        <div *ngIf="userAgent === 'desktop'">
          <button (click)=testExcel() class="nav-btn excel"></button>
          <span>יבוא לאקסל</span>
        </div>
        <div *ngIf="userAgent === 'desktop'">
          <button class="nav-btn ask-qr-payment"></button>
          <span>העבר בסריקה</span>
        </div>
      </div>

      <div class="sum-wrapper">
        <div class="sum success">
          קבלתי ₪<span class="sum-val">{{ addSum }}</span>
        </div>
        <div class="sum warning">
          העברתי ₪<span class="sum-val">{{ paySum }}</span>
        </div>
      </div>

      <movements (showTrans)=clickedTrans($event) (showSums)="showSums($event)"></movements>
    </div>
    <ng-template [ngIf]="userAgent === 'desktop'">
      <ng-template [ngIf]="!authenticated" [ngIfElse]="authenticatedView">
        <webit-qr-code></webit-qr-code>
      </ng-template>
      <ng-template #authenticatedView>
        <movements-summary *ngIf="userAgent=== 'desktop'" [choosenTrans]="choosenTrans"
                           [userAgent]="userAgent"></movements-summary>
      </ng-template>
    </ng-template>
  </div>
</ng-template>
